<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin - El Artesano</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #ede8d0;
            --color-secondary: #1a1a1a;
            --color-dark: #121212;
            --color-accent: #353c42;
            --color-light: #f8f9fa;
            --color-white: #FFFFFF;
            --sidebar-width: 260px;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Poppins', sans-serif;
        }

        body {
            font-family: var(--font-body);
            background: var(--color-light);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--color-secondary) 0%, var(--color-dark) 100%);
            padding: 2rem 0;
            z-index: 1000;
            overflow-y: auto;
            border-right: 2px solid var(--color-primary);
        }

        .sidebar-brand {
            padding: 0 1.5rem 2rem;
            border-bottom: 2px solid rgba(237, 232, 208, 0.2);
            margin-bottom: 1rem;
        }

        .sidebar-brand h3 {
            font-family: var(--font-heading);
            color: var(--color-primary);
            font-weight: 700;
            margin: 0;
            font-size: 1.5rem;
        }

        .sidebar-brand p {
            color: rgba(237, 232, 208, 0.7);
            margin: 0;
            font-size: 0.85rem;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
        }

        .sidebar-menu li {
            margin-bottom: 0.5rem;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: rgba(237, 232, 208, 0.8);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(237, 232, 208, 0.1);
            color: var(--color-primary);
            border-left: 4px solid var(--color-primary);
        }

        .sidebar-menu a i {
            margin-right: 0.75rem;
            font-size: 1.2rem;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 2rem;
            min-height: 100vh;
        }

        /* Header */
        .admin-header {
            background: white;
            padding: 1.5rem 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid var(--color-primary);
        }

        .admin-header h1 {
            margin: 0;
            font-family: var(--font-heading);
            color: var(--color-secondary);
            font-size: 2rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary);
            font-weight: 700;
            border: 3px solid var(--color-primary);
        }

        /* Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 6px 20px rgba(237, 232, 208, 0.3);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .stat-icon.blue { background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-dark) 100%); color: var(--color-primary); }
        .stat-icon.green { background: linear-gradient(135deg, #2d5016 0%, #1a3a0f 100%); color: var(--color-primary); }
        .stat-icon.orange { background: linear-gradient(135deg, #8b4513 0%, #5c2e0a 100%); color: var(--color-primary); }
        .stat-icon.purple { background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-secondary) 100%); color: var(--color-primary); }

        .stat-info h3 {
            margin: 0;
            font-size: 2rem;
            font-family: var(--font-heading);
            color: var(--color-secondary);
            font-weight: 700;
        }

        .stat-info p {
            margin: 0;
            color: var(--color-accent);
            font-size: 0.9rem;
        }

        /* Content Card */
        .content-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
            border: 2px solid var(--color-primary);
        }

        .content-card h2 {
            font-family: var(--font-heading);
            color: var(--color-secondary);
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.8rem;
        }

        /* Table */
        .table {
            margin: 0;
        }

        .table thead th {
            border-top: none;
            border-bottom: 3px solid var(--color-primary);
            font-weight: 600;
            font-family: var(--font-heading);
            color: var(--color-secondary);
            background: linear-gradient(to bottom, var(--color-primary), rgba(237, 232, 208, 0.3));
            font-size: 0.95rem;
        }

        .table tbody tr:hover {
            background: rgba(237, 232, 208, 0.1);
        }

        .badge {
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-weight: 600;
        }

        .badge.bg-success { background: #2d5016 !important; color: var(--color-primary) !important; }
        .badge.bg-warning { background: #8b4513 !important; color: var(--color-primary) !important; }
        .badge.bg-info { background: var(--color-accent) !important; color: var(--color-primary) !important; }
        .badge.bg-secondary { background: #666666 !important; color: var(--color-primary) !important; }

        .btn-primary {
            background: var(--color-secondary);
            border: 2px solid var(--color-secondary);
            color: var(--color-primary);
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            background: var(--color-primary);
            color: var(--color-secondary);
            border-color: var(--color-secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: var(--color-accent);
            border: 2px solid var(--color-accent);
            color: var(--color-primary);
        }

        .btn-secondary:hover {
            background: var(--color-primary);
            color: var(--color-accent);
            border-color: var(--color-accent);
        }

        .btn-secondary:hover {
            background: #4a4a4a;
        }

        .btn-success {
            background: #2d2d2d !important;
            border: none;
        }

        .btn-success:hover {
            background: #1a1a1a !important;
        }

        .btn-danger {
            background: #666666 !important;
            border: none;
        }

        .btn-danger:hover {
            background: #4a4a4a !important;
        }

        .btn-warning {
            background: #999999 !important;
            border: none;
            color: white !important;
        }

        .btn-warning:hover {
            background: #7a7a7a !important;
        }

        .btn-info {
            background: #4a4a4a !important;
            border: none;
        }

        .btn-info:hover {
            background: #333333 !important;
        }

        /* Modales */
        .modal-header {
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-dark) 100%);
            color: var(--color-primary);
            border-bottom: 3px solid var(--color-primary);
        }

        .modal-header .modal-title {
            font-family: var(--font-heading);
        }

        .modal-header .btn-close {
            filter: invert(1) brightness(1.5);
        }

        .modal-footer {
            border-top: 2px solid var(--color-primary);
            background: rgba(237, 232, 208, 0.1);
        }

        .modal-content {
            border: 2px solid var(--color-primary);
        }

        /* Inputs */
        .form-control:focus,
        .form-select:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 0.2rem rgba(237, 232, 208, 0.3);
        }

        .form-label {
            font-weight: 600;
            color: var(--color-secondary);
        }

        .form-label {
            color: #1a1a1a;
            font-weight: 500;
        }

        /* Login Modal */
        .modal-content {
            border: none;
            border-radius: 15px;
        }

        /* Alert */
        .alert {
            border-radius: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-brand">
            <h3>ü•ñ El Artesano</h3>
            <p>Panel de Administraci√≥n</p>
        </div>
        
        <ul class="sidebar-menu">
            <li><a href="#" class="active" data-section="dashboard"><i class="ri-dashboard-line"></i> Dashboard</a></li>
            <li><a href="#" data-section="productos"><i class="ri-shopping-bag-line"></i> Productos</a></li>
            <li><a href="#" data-section="cursos"><i class="ri-book-line"></i> Cursos</a></li>
            <li><a href="#" data-section="ordenes"><i class="ri-file-list-line"></i> √ìrdenes</a></li>
            <li><a href="#" data-section="clientes"><i class="ri-user-line"></i> Clientes</a></li>
            <li><a href="#" data-section="configuracion"><i class="ri-settings-line"></i> Configuraci√≥n</a></li>
            <li><a href="/"><i class="ri-home-line"></i> Volver al sitio</a></li>
            <li><a href="#" onclick="cerrarSesion()"><i class="ri-logout-box-line"></i> Cerrar Sesi√≥n</a></li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <div class="admin-header">
            <h1>Dashboard</h1>
            <div class="user-info">
                <div>
                    <strong>Administrador</strong>
                    <p class="text-muted mb-0" style="font-size: 0.85rem;">
                        <button class="btn btn-sm btn-outline-danger" onclick="cerrarSesion()" style="font-size: 0.75rem;">
                            <i class="ri-logout-box-line"></i> Cerrar Sesi√≥n
                        </button>
                    </p>
                </div>
                <div class="user-avatar">A</div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon blue">
                        <i class="ri-shopping-cart-line"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="stat-ordenes">0</h3>
                        <p>√ìrdenes Totales</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon green">
                        <i class="ri-money-dollar-circle-line"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="stat-ventas">$0</h3>
                        <p>Ventas del Mes</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon orange">
                        <i class="ri-shopping-bag-line"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="stat-productos">0</h3>
                        <p>Productos Activos</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon purple">
                        <i class="ri-user-line"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="stat-clientes">0</h3>
                        <p>Clientes</p>
                    </div>
                </div>
            </div>

            <!-- √ìrdenes Recientes -->
            <div class="content-card">
                <h2>
                    <span>√ìrdenes Recientes</span>
                    <button class="btn btn-primary btn-sm" onclick="verTodasOrdenes()">
                        <i class="ri-eye-line"></i> Ver todas
                    </button>
                </h2>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Cliente</th>
                                <th>Fecha</th>
                                <th>Total</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="ordenes-recientes">
                            <tr>
                                <td colspan="6" class="text-center py-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Cargando...</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Productos Section -->
        <div id="productos-section" style="display: none;">
            <div class="content-card">
                <h2>
                    <span>Gesti√≥n de Productos</span>
                    <button class="btn btn-primary" onclick="modalNuevoProducto()">
                        <i class="ri-add-line"></i> Nuevo Producto
                    </button>
                </h2>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Precio</th>
                                <th>Stock</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="productos-lista">
                            <tr>
                                <td colspan="6" class="text-center py-4">Cargando productos...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Cursos Section -->
        <div id="cursos-section" style="display: none;">
            <div class="content-card">
                <h2>
                    <span>Gesti√≥n de Cursos</span>
                    <button class="btn btn-primary" onclick="modalNuevoCurso()">
                        <i class="ri-add-line"></i> Nuevo Curso
                    </button>
                </h2>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>T√≠tulo</th>
                                <th>Precio</th>
                                <th>Alumnos</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="cursos-lista">
                            <tr>
                                <td colspan="6" class="text-center py-4">Cargando cursos...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- √ìrdenes Section -->
        <div id="ordenes-section" style="display: none;">
            <div class="content-card">
                <h2>
                    <span>Todas las √ìrdenes</span>
                    <div>
                        <select class="form-select form-select-sm d-inline-block w-auto" id="filtro-estado" onchange="filtrarOrdenes()">
                            <option value="">Todos los estados</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="pagado">Pagado</option>
                            <option value="preparando">Preparando</option>
                            <option value="enviado">Enviado</option>
                            <option value="entregado">Entregado</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                </h2>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Cliente</th>
                                <th>Fecha</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="ordenes-todas">
                            <tr>
                                <td colspan="7" class="text-center py-4">Cargando √≥rdenes...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Configuraci√≥n Section -->
        <div id="configuracion-section" style="display: none;">
            <div class="content-card">
                <h2><i class="ri-settings-line"></i> Configuraci√≥n del Sistema</h2>
                
                <!-- Cambiar Contrase√±a -->
                <div class="mb-4">
                    <h5 class="mb-3"><i class="ri-lock-password-line"></i> Seguridad</h5>
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">Cambiar Contrase√±a de Administrador</h6>
                            <p class="text-muted small">Protege tu panel de administraci√≥n con una contrase√±a segura</p>
                            
                            <form id="form-cambiar-password">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Contrase√±a Actual</label>
                                        <input type="password" class="form-control" id="password-actual" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Nueva Contrase√±a</label>
                                        <input type="password" class="form-control" id="password-nueva" required minlength="6">
                                        <small class="text-muted">M√≠nimo 6 caracteres</small>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="ri-save-line"></i> Cambiar Contrase√±a
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Informaci√≥n del Sistema -->
                <div class="mb-4">
                    <h5 class="mb-3"><i class="ri-information-line"></i> Informaci√≥n</h5>
                    <div class="card">
                        <div class="card-body">
                            <table class="table table-borderless mb-0">
                                <tr>
                                    <td><strong>Versi√≥n:</strong></td>
                                    <td>2.0.0</td>
                                </tr>
                                <tr>
                                    <td><strong>Estado del Servidor:</strong></td>
                                    <td><span class="badge bg-success">Activo</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Base de Datos:</strong></td>
                                    <td id="db-status">Conectada</td>
                                </tr>
                                <tr>
                                    <td><strong>API Base:</strong></td>
                                    <td><code>http://localhost:3000</code></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Gu√≠as y Ayuda -->
                <div class="mb-4">
                    <h5 class="mb-3"><i class="ri-book-open-line"></i> Documentaci√≥n</h5>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title"><i class="ri-file-text-line"></i> Inicio R√°pido</h6>
                                    <p class="card-text small">Gu√≠a de 3 pasos para empezar</p>
                                    <a href="INICIO_RAPIDO.md" target="_blank" class="btn btn-sm btn-outline-primary">
                                        Ver Gu√≠a
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title"><i class="ri-graduation-cap-line"></i> Subir Cursos</h6>
                                    <p class="card-text small">Tutorial completo de cursos</p>
                                    <a href="COMO_SUBIR_CURSOS.md" target="_blank" class="btn btn-sm btn-outline-primary">
                                        Ver Tutorial
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title"><i class="ri-database-line"></i> Supabase</h6>
                                    <p class="card-text small">Configuraci√≥n de base de datos</p>
                                    <a href="GUIA_SUPABASE.md" target="_blank" class="btn btn-sm btn-outline-primary">
                                        Ver Gu√≠a
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Acciones del Sistema -->
                <div class="mb-4">
                    <h5 class="mb-3"><i class="ri-tools-line"></i> Herramientas</h5>
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h6 class="mb-1">Limpiar Cach√© del Navegador</h6>
                                    <p class="text-muted small mb-0">Si ves datos antiguos, limpia la cach√©</p>
                                </div>
                                <button class="btn btn-outline-secondary" onclick="localStorage.clear(); location.reload();">
                                    <i class="ri-delete-bin-line"></i> Limpiar
                                </button>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">Configurar Integraciones</h6>
                                    <p class="text-muted small mb-0">Mercado Pago, Email, WhatsApp</p>
                                </div>
                                <a href="#" class="btn btn-outline-primary" onclick="alert('Ejecuta: npm run setup\nen la terminal')">
                                    <i class="ri-terminal-line"></i> Ver Comando
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Nuevo Producto -->
    <div class="modal fade" id="modal-nuevo-producto" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="ri-add-circle-line"></i> Nuevo Producto
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="form-nuevo-producto">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label class="form-label">Nombre del Producto *</label>
                                    <input type="text" class="form-control" id="producto-nombre" required 
                                           placeholder="Ej: Pan de Campo Artesanal">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Precio *</label>
                                    <div class="input-group">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control" id="producto-precio" required 
                                               min="0" step="0.01" placeholder="0.00">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Descripci√≥n</label>
                            <textarea class="form-control" id="producto-descripcion" rows="3" 
                                      placeholder="Describe el producto, ingredientes, caracter√≠sticas especiales..."></textarea>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Categor√≠a *</label>
                                    <select class="form-select" id="producto-categoria" required>
                                        <option value="">Seleccionar...</option>
                                        <option value="panes">Panes</option>
                                        <option value="pasteles">Pasteles</option>
                                        <option value="galletas">Galletas</option>
                                        <option value="postres">Postres</option>
                                        <option value="otros">Otros</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Stock Disponible *</label>
                                    <input type="number" class="form-control" id="producto-stock" required 
                                           min="0" value="0" placeholder="0">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">SKU (C√≥digo)</label>
                                    <input type="text" class="form-control" id="producto-sku" 
                                           placeholder="Ej: PAN-001">
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Imagen del Producto</label>
                            
                            <!-- Tabs para seleccionar m√©todo -->
                            <ul class="nav nav-tabs mb-3" id="producto-imagen-tabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="producto-upload-tab" data-bs-toggle="tab" 
                                            data-bs-target="#producto-upload" type="button" role="tab">
                                        üìÅ Subir desde PC
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="producto-url-tab" data-bs-toggle="tab" 
                                            data-bs-target="#producto-url" type="button" role="tab">
                                        üîó URL Externa
                                    </button>
                                </li>
                            </ul>

                            <div class="tab-content" id="producto-imagen-content">
                                <!-- Tab de Upload -->
                                <div class="tab-pane fade show active" id="producto-upload" role="tabpanel">
                                    <div class="upload-area" id="producto-upload-area" 
                                         style="border: 2px dashed #ddd; padding: 20px; text-align: center; cursor: pointer; border-radius: 8px;">
                                        <i class="ri-upload-cloud-2-line" style="font-size: 2rem; color: #666;"></i>
                                        <p class="mb-2">Arrastra una imagen aqu√≠ o haz clic para seleccionar</p>
                                        <small class="text-muted">Formatos: JPG, PNG, GIF, WebP (m√°x. 5MB)</small>
                                        <input type="file" id="producto-file-input" accept="image/*" style="display: none;">
                                    </div>
                                    
                                    <!-- Preview de imagen -->
                                    <div id="producto-image-preview" style="display: none; margin-top: 15px;">
                                        <img id="producto-preview-img" src="" alt="Preview" 
                                             style="max-width: 200px; max-height: 200px; object-fit: cover; border-radius: 8px;">
                                        <div class="mt-2">
                                            <button type="button" class="btn btn-sm btn-outline-danger" id="producto-remove-image">
                                                <i class="ri-delete-bin-line"></i> Eliminar
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab de URL -->
                                <div class="tab-pane fade" id="producto-url" role="tabpanel">
                                    <input type="url" class="form-control" id="producto-imagen-url" 
                                           placeholder="https://ejemplo.com/imagen.jpg">
                                    <small class="text-muted">URL de imagen externa</small>
                                </div>
                            </div>

                            <!-- Campo oculto para almacenar la URL final -->
                            <input type="hidden" id="producto-imagen" name="imagen_url">
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="producto-activo" checked>
                                    <label class="form-check-label" for="producto-activo">
                                        Producto Activo (Visible en la tienda)
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="producto-destacado">
                                    <label class="form-check-label" for="producto-destacado">
                                        Producto Destacado (Aparece primero)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="ri-close-line"></i> Cancelar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="guardarNuevoProducto()">
                        <i class="ri-save-line"></i> Guardar Producto
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Nuevo Curso -->
    <div class="modal fade" id="modal-nuevo-curso" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="ri-book-open-line"></i> Nuevo Curso
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="form-nuevo-curso">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label class="form-label">T√≠tulo del Curso *</label>
                                    <input type="text" class="form-control" id="curso-titulo" required 
                                           placeholder="Ej: Panader√≠a Artesanal desde Cero">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Precio *</label>
                                    <div class="input-group">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control" id="curso-precio" required 
                                               min="0" step="0.01" placeholder="0.00">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Descripci√≥n del Curso</label>
                            <textarea class="form-control" id="curso-descripcion" rows="4" 
                                      placeholder="Describe qu√© aprender√°n los estudiantes, contenido del curso, beneficios..."></textarea>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Duraci√≥n (horas) *</label>
                                    <input type="number" class="form-control" id="curso-duracion" required 
                                           min="0.5" step="0.5" value="1" placeholder="Ej: 10">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Nivel *</label>
                                    <select class="form-select" id="curso-nivel" required>
                                        <option value="">Seleccionar...</option>
                                        <option value="principiante">Principiante</option>
                                        <option value="intermedio">Intermedio</option>
                                        <option value="avanzado">Avanzado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Categor√≠a</label>
                                    <select class="form-select" id="curso-categoria">
                                        <option value="">Seleccionar...</option>
                                        <option value="panaderia">Panader√≠a</option>
                                        <option value="reposteria">Reposter√≠a</option>
                                        <option value="pasteleria">Pasteler√≠a</option>
                                        <option value="otros">Otros</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Imagen de Portada</label>
                            
                            <!-- Tabs para seleccionar m√©todo -->
                            <ul class="nav nav-tabs mb-3" id="curso-imagen-tabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="curso-upload-tab" data-bs-toggle="tab" 
                                            data-bs-target="#curso-upload" type="button" role="tab">
                                        üìÅ Subir desde PC
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="curso-url-tab" data-bs-toggle="tab" 
                                            data-bs-target="#curso-url" type="button" role="tab">
                                        üîó URL Externa
                                    </button>
                                </li>
                            </ul>

                            <div class="tab-content" id="curso-imagen-content">
                                <!-- Tab de Upload -->
                                <div class="tab-pane fade show active" id="curso-upload" role="tabpanel">
                                    <div class="upload-area" id="curso-upload-area" 
                                         style="border: 2px dashed #ddd; padding: 20px; text-align: center; cursor: pointer; border-radius: 8px;">
                                        <i class="ri-upload-cloud-2-line" style="font-size: 2rem; color: #666;"></i>
                                        <p class="mb-2">Arrastra una imagen aqu√≠ o haz clic para seleccionar</p>
                                        <small class="text-muted">Formatos: JPG, PNG, GIF, WebP (m√°x. 5MB)</small>
                                        <input type="file" id="curso-file-input" accept="image/*" style="display: none;">
                                    </div>
                                    
                                    <!-- Preview de imagen -->
                                    <div id="curso-image-preview" style="display: none; margin-top: 15px;">
                                        <img id="curso-preview-img" src="" alt="Preview" 
                                             style="max-width: 200px; max-height: 200px; object-fit: cover; border-radius: 8px;">
                                        <div class="mt-2">
                                            <button type="button" class="btn btn-sm btn-outline-danger" id="curso-remove-image">
                                                <i class="ri-delete-bin-line"></i> Eliminar
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab de URL -->
                                <div class="tab-pane fade" id="curso-url" role="tabpanel">
                                    <input type="url" class="form-control" id="curso-imagen-url" 
                                           placeholder="https://ejemplo.com/curso.jpg">
                                    <small class="text-muted">URL de imagen externa</small>
                                </div>
                            </div>

                            <!-- Campo oculto para almacenar la URL final -->
                            <input type="hidden" id="curso-imagen" name="imagen_url">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Video de Introducci√≥n (URL)</label>
                            <input type="url" class="form-control" id="curso-video-intro" 
                                   placeholder="https://www.youtube.com/watch?v=...">
                            <small class="text-muted">YouTube, Vimeo o video directo (opcional)</small>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="curso-activo" checked>
                                    <label class="form-check-label" for="curso-activo">
                                        Curso Activo (Visible en la tienda)
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="curso-destacado">
                                    <label class="form-check-label" for="curso-destacado">
                                        Curso Destacado (Aparece primero)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <i class="ri-information-line"></i> 
                            <strong>Nota:</strong> Despu√©s de crear el curso, podr√°s agregar las lecciones desde la tabla de cursos haciendo clic en "Gestionar Lecciones".
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="ri-close-line"></i> Cancelar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="guardarNuevoCurso()">
                        <i class="ri-save-line"></i> Guardar Curso
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        console.log('‚úÖ Script de admin.html cargado');
        
        // Configuraci√≥n API
        window.API_BASE = '';
        let token = localStorage.getItem('admin_token');
        
        console.log('API_BASE:', window.API_BASE);
        console.log('Token:', token);

        // Verificar autenticaci√≥n al cargar
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üéØ DOMContentLoaded - Verificando autenticaci√≥n');
            verificarAutenticacion();
        });

        function verificarAutenticacion() {
            console.log('üîê verificarAutenticacion() llamada');
            const password = localStorage.getItem('admin_password');
            console.log('Password guardada:', password);
            
            // Contrase√±a predeterminada (cambiar despu√©s)
            const ADMIN_PASSWORD = 'admin123';
            
            if (password !== ADMIN_PASSWORD) {
                console.log('‚ùå Password incorrecta o no existe - Mostrando login');
                mostrarLoginModal();
            } else {
                console.log('‚úÖ Password correcta - Inicializando admin panel');
                inicializarAdmin();
            }
        }

        function mostrarLoginModal() {
            // Ocultar contenido principal
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');
            if (sidebar) sidebar.style.display = 'none';
            if (mainContent) mainContent.style.display = 'none';
            
            const loginModal = document.createElement('div');
            loginModal.className = 'modal fade';
            loginModal.id = 'login-modal';
            loginModal.setAttribute('data-bs-backdrop', 'static');
            loginModal.setAttribute('data-bs-keyboard', 'false');
            loginModal.innerHTML = `
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header bg-primary text-white">
                            <h5 class="modal-title">
                                <i class="ri-lock-line"></i> Panel de Administraci√≥n
                            </h5>
                        </div>
                        <div class="modal-body">
                            <div class="text-center mb-4">
                                <i class="ri-admin-line" style="font-size: 48px; color: #8B4513;"></i>
                                <h6 class="mt-3">Acceso Restringido</h6>
                                <p class="text-muted small">Solo administradores autorizados</p>
                            </div>
                            
                            <form id="login-form">
                                <div class="mb-3">
                                    <label class="form-label">Contrase√±a de Administrador</label>
                                    <input type="password" class="form-control" id="admin-password-input" 
                                           placeholder="Ingresa tu contrase√±a" required autofocus>
                                    <small class="text-muted">
                                        Contrase√±a predeterminada: <code>admin123</code>
                                    </small>
                                </div>
                                
                                <div id="login-error" class="alert alert-danger d-none">
                                    <i class="ri-error-warning-line"></i> Contrase√±a incorrecta
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100">
                                    <i class="ri-login-box-line"></i> Acceder
                                </button>
                            </form>
                            
                            <hr class="my-4">
                            
                            <div class="alert alert-warning small">
                                <strong><i class="ri-information-line"></i> Importante:</strong><br>
                                Despu√©s de acceder, cambia la contrase√±a en la secci√≥n de Configuraci√≥n.
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(loginModal);
            const modal = new bootstrap.Modal(loginModal);
            modal.show();
            
            document.getElementById('login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                intentarLogin();
            });
        }

        function intentarLogin() {
            const password = document.getElementById('admin-password-input').value;
            const ADMIN_PASSWORD = 'admin123'; // Cambiar despu√©s
            
            if (password === ADMIN_PASSWORD) {
                localStorage.setItem('admin_password', password);
                
                // Cerrar modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('login-modal'));
                modal.hide();
                
                // Mostrar contenido
                const sidebar = document.querySelector('.sidebar');
                const mainContent = document.querySelector('.main-content');
                if (sidebar) sidebar.style.display = 'block';
                if (mainContent) mainContent.style.display = 'block';
                
                // Inicializar admin panel
                console.log('‚úÖ Login exitoso - Inicializando panel');
                inicializarAdmin();
                
                // Mostrar mensaje de bienvenida
                setTimeout(() => {
                    alert('‚úÖ Bienvenido al Panel de Administraci√≥n\n\n‚ö†Ô∏è IMPORTANTE: Cambia tu contrase√±a en Configuraci√≥n');
                }, 500);
            } else {
                // Mostrar error
                document.getElementById('login-error').classList.remove('d-none');
                document.getElementById('admin-password-input').value = '';
                document.getElementById('admin-password-input').focus();
            }
        }

        function cerrarSesion() {
            if (confirm('¬øCerrar sesi√≥n?')) {
                localStorage.removeItem('admin_password');
                location.reload();
            }
        }

        // Navegaci√≥n entre secciones (ahora en inicializarAdmin())

        function cargarConfiguracion() {
            // Configurar form de cambiar contrase√±a
            const form = document.getElementById('form-cambiar-password');
            if (form) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    cambiarPassword();
                });
            }
        }

        function cambiarPassword() {
            const passwordActual = document.getElementById('password-actual').value;
            const passwordNueva = document.getElementById('password-nueva').value;
            
            const passwordGuardada = localStorage.getItem('admin_password');
            
            if (passwordActual !== passwordGuardada) {
                alert('‚ùå La contrase√±a actual es incorrecta');
                return;
            }
            
            if (passwordNueva.length < 6) {
                alert('‚ùå La nueva contrase√±a debe tener al menos 6 caracteres');
                return;
            }
            
            if (confirm('¬øCambiar contrase√±a?\n\n‚ö†Ô∏è Aseg√∫rate de recordarla, no podr√°s recuperarla.')) {
                localStorage.setItem('admin_password', passwordNueva);
                alert('‚úÖ Contrase√±a cambiada exitosamente');
                document.getElementById('form-cambiar-password').reset();
            }
        }

        // Cargar Dashboard
        async function cargarDashboard() {
            console.log('üéØ cargarDashboard() iniciado');
            try {
                // Cargar estad√≠sticas reales
                await cargarEstadisticasReales();
                
                console.log('üéØ Llamando a cargarOrdenesRecientes()');
                cargarOrdenesRecientes();
            } catch (error) {
                console.error('Error cargando dashboard:', error);
            }
        }

        async function cargarEstadisticasReales() {
            try {
                // Obtener productos
                const prodResponse = await fetch(`${window.location.origin}/api/productos`);
                const prodData = await prodResponse.json();
                const numProductos = prodData.success && prodData.data ? prodData.data.length : 0;
                document.getElementById('stat-productos').textContent = numProductos;
                console.log(`‚úÖ Productos cargados: ${numProductos}`);
                
                // Obtener cursos
                const cursosResponse = await fetch(`${window.location.origin}/api/cursos`);
                const cursosData = await cursosResponse.json();
                const numCursos = cursosData.success && cursosData.data ? cursosData.data.length : 0;
                
                // Obtener √≥rdenes (para estad√≠sticas)
                try {
                    const ordenesResponse = await fetch(`${window.API_BASE}/api/ordenes/admin/all`);
                    const ordenesData = await ordenesResponse.json();
                    const numOrdenes = ordenesData.success && ordenesData.data ? ordenesData.data.length : 0;
                    document.getElementById('stat-ordenes').textContent = numOrdenes;
                    
                    // Calcular total de ventas
                    if (ordenesData.success && ordenesData.data) {
                        const totalVentas = ordenesData.data
                            .filter(o => o.estado === 'pagado' || o.estado === 'entregado')
                            .reduce((sum, o) => sum + parseFloat(o.total || 0), 0);
                        document.getElementById('stat-ventas').textContent = `$${totalVentas.toLocaleString('es-AR')}`;
                    }
                } catch (err) {
                    console.warn('‚ö†Ô∏è No se pudieron cargar √≥rdenes:', err.message);
                    document.getElementById('stat-ordenes').textContent = '0';
                    document.getElementById('stat-ventas').textContent = '$0';
                }
                
                // Clientes (por implementar)
                document.getElementById('stat-clientes').textContent = '-';
                
            } catch (error) {
                console.error('Error cargando estad√≠sticas:', error);
                // Valores por defecto en caso de error
                document.getElementById('stat-ordenes').textContent = '0';
                document.getElementById('stat-ventas').textContent = '$0';
                document.getElementById('stat-productos').textContent = '0';
                document.getElementById('stat-clientes').textContent = '0';
            }
        }

        async function cargarOrdenesRecientes() {
            const tbody = document.getElementById('ordenes-recientes');
            tbody.innerHTML = '<tr><td colspan="6" class="text-center py-4"><div class="spinner-border text-primary" role="status"></div></td></tr>';
            
            try {
                const response = await fetch(`${window.API_BASE}/api/ordenes/admin/all?limite=5`);
                const data = await response.json();
                
                if (!data.success || !data.data || data.data.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" class="text-center py-4">No hay √≥rdenes recientes</td></tr>';
                    return;
                }

                tbody.innerHTML = data.data.slice(0, 5).map(orden => {
                    const estadoBadge = {
                        'pendiente': 'secondary',
                        'pendiente_pago': 'warning',
                        'pagado': 'success',
                        'preparacion': 'info',
                        'enviado': 'primary',
                        'entregado': 'success',
                        'cancelado': 'danger'
                    };
                    
                    return `
                        <tr>
                            <td><strong>${orden.numero_orden}</strong></td>
                            <td>${orden.cliente_nombre}</td>
                            <td>${new Date(orden.fecha_creacion).toLocaleDateString('es-AR')}</td>
                            <td><strong>$${parseFloat(orden.total).toLocaleString('es-AR')}</strong></td>
                            <td>
                                <span class="badge bg-${estadoBadge[orden.estado] || 'secondary'}">
                                    ${orden.estado.replace('_', ' ').toUpperCase()}
                                </span>
                                ${orden.metodo_pago === 'transferencia' ? '<small class="d-block text-muted">Transferencia</small>' : ''}
                            </td>
                            <td>
                                <button class="btn btn-sm btn-info" onclick="verDetalleOrden('${orden.id}')" title="Ver Detalles">
                                    <i class="ri-eye-line"></i>
                                </button>
                                ${orden.estado === 'pendiente_pago' && orden.metodo_pago === 'transferencia' ? `
                                    <button class="btn btn-sm btn-success" onclick="confirmarPago('${orden.id}')" title="Confirmar Pago">
                                        <i class="ri-check-line"></i>
                                    </button>
                                ` : ''}
                            </td>
                        </tr>
                    `;
                }).join('');
                
                // Actualizar estad√≠sticas
                const ordenesPendientes = data.data.filter(o => o.estado === 'pendiente_pago').length;
                document.getElementById('stat-ordenes').textContent = ordenesPendientes;
                
            } catch (error) {
                console.error('Error cargando √≥rdenes:', error);
                tbody.innerHTML = '<tr><td colspan="6" class="text-center py-4 text-danger">Error al cargar √≥rdenes</td></tr>';
            }
        }

        async function verDetalleOrden(ordenId) {
            try {
                const headers = {};
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`${window.API_BASE}/api/ordenes/${ordenId}`, { headers });
                const data = await response.json();
                
                if (!data.success) {
                    alert('Error al cargar detalles de la orden');
                    return;
                }
                
                const orden = data.data;
                const modal = document.createElement('div');
                modal.className = 'modal fade';
                modal.id = 'modal-detalle-orden';
                modal.innerHTML = `
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">
                                    <i class="ri-file-list-line"></i> Orden ${orden.numero_orden}
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <h6>Cliente</h6>
                                        <p>${orden.cliente_nombre}<br>
                                        ${orden.cliente_email}<br>
                                        ${orden.cliente_telefono}</p>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Entrega</h6>
                                        <p>${orden.direccion_entrega}<br>
                                        ${orden.ciudad}, ${orden.codigo_postal}</p>
                                    </div>
                                </div>
                                
                                <h6>Items</h6>
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th>Producto</th>
                                            <th>Cantidad</th>
                                            <th>Precio</th>
                                            <th>Subtotal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${orden.orden_items.map(item => `
                                            <tr>
                                                <td>${item.producto_nombre}</td>
                                                <td>${item.cantidad}</td>
                                                <td>$${parseFloat(item.precio_unitario).toLocaleString('es-AR')}</td>
                                                <td>$${parseFloat(item.subtotal).toLocaleString('es-AR')}</td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="3" class="text-end"><strong>Total:</strong></td>
                                            <td><strong>$${parseFloat(orden.total).toLocaleString('es-AR')}</strong></td>
                                        </tr>
                                    </tfoot>
                                </table>
                                
                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <h6>Estado</h6>
                                        <p><span class="badge bg-info">${orden.estado.toUpperCase()}</span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>M√©todo de Pago</h6>
                                        <p>${orden.metodo_pago || 'No especificado'}</p>
                                        ${orden.comprobante_url ? `<a href="${orden.comprobante_url}" target="_blank" class="btn btn-sm btn-outline-primary">Ver Comprobante</a>` : ''}
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                ${orden.estado === 'pendiente_pago' && orden.metodo_pago === 'transferencia' ? `
                                    <button class="btn btn-success" onclick="confirmarPago('${orden.id}')">
                                        <i class="ri-check-line"></i> Confirmar Pago
                                    </button>
                                ` : ''}
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                const bsModal = new bootstrap.Modal(modal);
                bsModal.show();
                
                modal.addEventListener('hidden.bs.modal', () => {
                    modal.remove();
                });
                
            } catch (error) {
                console.error('Error:', error);
                alert('Error al cargar detalles de la orden');
            }
        }

        async function confirmarPago(ordenId) {
            if (!confirm('¬øConfirmar que recibiste el pago de esta orden?')) return;
            
            try {
                const headers = {
                    'Content-Type': 'application/json'
                };
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`${window.API_BASE}/api/ordenes/${ordenId}/confirmar-pago`, {
                    method: 'POST',
                    headers,
                    body: JSON.stringify({
                        notas_pago: 'Pago confirmado por administrador'
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Pago confirmado exitosamente');
                    
                    // Cerrar modal si est√° abierto
                    const modalElement = document.getElementById('modal-detalle-orden');
                    if (modalElement) {
                        const modal = bootstrap.Modal.getInstance(modalElement);
                        if (modal) modal.hide();
                    }
                    
                    // Recargar √≥rdenes
                    cargarOrdenesRecientes();
                } else {
                    alert('‚ùå Error al confirmar pago: ' + (data.message || 'Error desconocido'));
                }
                
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al confirmar el pago');
            }
        }

        async function cargarProductos() {
            const tbody = document.getElementById('productos-lista');
            tbody.innerHTML = '<tr><td colspan="6" class="text-center py-4"><div class="spinner-border text-primary" role="status"></div></td></tr>';
            
            try {
                const url = `${window.location.origin}/api/productos?t=${Date.now()}`;
                console.log('üîç Cargando productos desde:', url);
                const response = await fetch(url);
                console.log('‚úÖ Response status:', response.status);
                console.log('‚úÖ Response headers:', response.headers.get('content-type'));
                
                const data = await response.json();
                console.log('Productos recibidos:', data);
                
                if (!data.success || !data.data || data.data.length === 0) {
                    tbody.innerHTML = `
                        <tr><td colspan="6" class="text-center py-4">
                            <p>No hay productos. Crea tu primer producto.</p>
                            ${data.modo === 'ejemplo' ? '<small class="text-muted">Modo ejemplo activo (Supabase no configurado)</small>' : ''}
                        </td></tr>
                    `;
                    return;
                }
                
                tbody.innerHTML = data.data.map(producto => `
                    <tr>
                        <td>#${producto.id ? String(producto.id).substring(0, 8) : 'N/A'}</td>
                        <td>
                            <strong>${producto.nombre}</strong><br>
                            <small class="text-muted">${producto.categoria || 'Sin categor√≠a'}</small>
                        </td>
                        <td><strong>$${parseFloat(producto.precio).toLocaleString('es-AR')}</strong></td>
                        <td>${producto.stock || 0}</td>
                        <td>
                            <span class="badge bg-${producto.activo ? 'success' : 'secondary'}">
                                ${producto.activo ? 'Activo' : 'Inactivo'}
                            </span>
                            ${producto.destacado ? '<span class="badge bg-warning ms-1">Destacado</span>' : ''}
                        </td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="editarProducto('${producto.id}')" title="Editar">
                                <i class="ri-edit-line"></i>
                            </button>
                            <button class="btn btn-sm btn-${producto.activo ? 'warning' : 'success'}" 
                                    onclick="toggleActivoProducto('${producto.id}', ${!producto.activo})" 
                                    title="${producto.activo ? 'Desactivar' : 'Activar'}">
                                <i class="ri-${producto.activo ? 'eye-off' : 'eye'}-line"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="eliminarProducto('${producto.id}')" title="Eliminar">
                                <i class="ri-delete-bin-line"></i>
                            </button>
                        </td>
                    </tr>
                `).join('');
                
                // Actualizar estad√≠sticas
                const productosActivos = data.data.filter(p => p.activo).length;
                document.getElementById('stat-productos').textContent = productosActivos;
                
            } catch (error) {
                console.error('‚ùå Error cargando productos:', error);
                tbody.innerHTML = `
                    <tr><td colspan="6" class="text-center py-4 text-danger">
                        <i class="ri-error-warning-line"></i> Error al cargar productos: ${error.message}<br>
                        <small class="text-muted">Revisa la consola para m√°s detalles</small>
                    </td></tr>
                `;
            }
        }

        async function editarProducto(id) {
            try {
                // Buscar el producto en los datos cargados
                const response = await fetch(`/api/productos`);
                const data = await response.json();
                const producto = data.data.find(p => p.id == id);
                
                if (!producto) {
                    alert('Producto no encontrado');
                    return;
                }

                // Llenar el formulario con los datos del producto
                document.getElementById('edit-producto-id').value = producto.id;
                document.getElementById('edit-producto-nombre').value = producto.nombre || '';
                document.getElementById('edit-producto-categoria').value = producto.categoria || '';
                document.getElementById('edit-producto-descripcion').value = producto.descripcion || '';
                document.getElementById('edit-producto-precio').value = producto.precio || '';
                document.getElementById('edit-producto-stock').value = producto.stock || '';
                document.getElementById('edit-producto-activo').checked = producto.activo !== false;
                document.getElementById('edit-producto-destacado').checked = producto.destacado === true;
                document.getElementById('edit-producto-imagen').value = producto.imagen_url || '';

                // Mostrar el modal
                const modal = new bootstrap.Modal(document.getElementById('modal-editar-producto'));
                modal.show();
                
            } catch (error) {
                console.error('Error cargando producto:', error);
                alert('Error al cargar los datos del producto');
            }
        }

        function toggleActivoProducto(id, nuevoEstado) {
            alert('Funcionalidad en desarrollo');
        }

        function eliminarProducto(id) {
            if (confirm('¬øEliminar este producto?')) {
                alert('Funcionalidad en desarrollo');
            }
        }

        async function cargarCursos() {
            const tbody = document.getElementById('cursos-lista');
            tbody.innerHTML = '<tr><td colspan="6" class="text-center py-4"><div class="spinner-border text-primary" role="status"></div></td></tr>';
            
            try {
                const url = `${window.location.origin}/api/cursos?t=${Date.now()}`;
                console.log('üîç Cargando cursos desde:', url);
                const response = await fetch(url);
                console.log('‚úÖ Response status:', response.status);
                console.log('‚úÖ Response headers:', response.headers.get('content-type'));
                
                const data = await response.json();
                console.log('Cursos recibidos:', data);
                
                if (!data.success || !data.data || data.data.length === 0) {
                    tbody.innerHTML = `
                        <tr><td colspan="6" class="text-center py-4">
                            <p>No hay cursos. Crea tu primer curso.</p>
                            ${data.modo === 'ejemplo' ? '<small class="text-muted">Modo ejemplo activo (Supabase no configurado)</small>' : ''}
                        </td></tr>
                    `;
                    return;
                }
                
                tbody.innerHTML = data.data.map(curso => `
                    <tr>
                        <td>#${curso.id ? String(curso.id).substring(0, 8) : 'N/A'}</td>
                        <td>
                            <strong>${curso.titulo}</strong><br>
                            <small class="text-muted">${curso.nivel || 'N/A'} ‚Ä¢ ${curso.duracion_horas}h</small>
                        </td>
                        <td><strong>$${parseFloat(curso.precio).toLocaleString('es-AR')}</strong></td>
                        <td>
                            <i class="ri-user-line"></i> 0
                        </td>
                        <td>
                            <span class="badge bg-${curso.activo ? 'success' : 'secondary'}">
                                ${curso.activo ? 'Activo' : 'Inactivo'}
                            </span>
                            ${curso.destacado ? '<span class="badge bg-warning ms-1">Destacado</span>' : ''}
                        </td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="editarCurso('${curso.id}')" title="Editar">
                                <i class="ri-edit-line"></i>
                            </button>
                            <button class="btn btn-sm btn-info" onclick="gestionarLecciones('${curso.id}')" title="Lecciones">
                                <i class="ri-play-list-line"></i>
                            </button>
                            <button class="btn btn-sm btn-${curso.activo ? 'warning' : 'success'}" 
                                    onclick="toggleActivoCurso('${curso.id}', ${!curso.activo})" 
                                    title="${curso.activo ? 'Desactivar' : 'Activar'}">
                                <i class="ri-${curso.activo ? 'eye-off' : 'eye'}-line"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="eliminarCurso('${curso.id}')" title="Eliminar">
                                <i class="ri-delete-bin-line"></i>
                            </button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                console.error('‚ùå Error cargando cursos:', error);
                tbody.innerHTML = `
                    <tr><td colspan="6" class="text-center py-4 text-danger">
                        <i class="ri-error-warning-line"></i> Error al cargar cursos: ${error.message}<br>
                        <small class="text-muted">Revisa la consola para m√°s detalles</small>
                    </td></tr>
                `;
            }
        }

        function modalNuevoCurso() {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"><i class="ri-graduation-cap-line"></i> Nuevo Curso</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <form id="form-nuevo-curso">
                                <div class="row">
                                    <div class="col-md-8 mb-3">
                                        <label class="form-label">T√≠tulo del Curso *</label>
                                        <input type="text" class="form-control" id="curso-titulo" required 
                                               placeholder="Ej: Panader√≠a B√°sica - Primeros Pasos">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label class="form-label">Precio ($) *</label>
                                        <input type="number" class="form-control" id="curso-precio" required min="0" step="0.01">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Descripci√≥n *</label>
                                    <textarea class="form-control" id="curso-descripcion" rows="3" required
                                              placeholder="Describe brevemente qu√© aprender√°n los alumnos"></textarea>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label class="form-label">Duraci√≥n (horas) *</label>
                                        <input type="number" class="form-control" id="curso-duracion" required min="1" step="0.5">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label class="form-label">Nivel</label>
                                        <select class="form-select" id="curso-nivel">
                                            <option value="Principiante">Principiante</option>
                                            <option value="Intermedio">Intermedio</option>
                                            <option value="Avanzado">Avanzado</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label class="form-label">Imagen URL</label>
                                        <input type="url" class="form-control" id="curso-imagen" 
                                               placeholder="https://...">
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="curso-activo" checked>
                                            <label class="form-check-label" for="curso-activo">
                                                Activo (visible en la tienda)
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="curso-destacado">
                                            <label class="form-check-label" for="curso-destacado">
                                                Curso Destacado
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="alert alert-info">
                                    <i class="ri-information-line"></i>
                                    Despu√©s de crear el curso, podr√°s agregar las lecciones y videos.
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-primary" onclick="guardarNuevoCurso()">
                                <i class="ri-save-line"></i> Crear Curso
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();
            modal.addEventListener('hidden.bs.modal', () => modal.remove());
        }

        async function guardarNuevoCurso() {
            const titulo = document.getElementById('curso-titulo').value;
            const precio = parseFloat(document.getElementById('curso-precio').value);
            const descripcion = document.getElementById('curso-descripcion').value;
            const duracion = parseFloat(document.getElementById('curso-duracion').value);
            const nivel = document.getElementById('curso-nivel').value;
            const imagen = document.getElementById('curso-imagen').value;
            const activo = document.getElementById('curso-activo').checked;
            const destacado = document.getElementById('curso-destacado').checked;

            if (!titulo || !precio || !descripcion || !duracion) {
                alert('Por favor completa todos los campos obligatorios');
                return;
            }

            try {
                const response = await fetch(`${window.API_BASE}/api/admin/cursos`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        titulo,
                        descripcion,
                        precio,
                        duracion_horas: duracion,
                        nivel,
                        imagen_url: imagen || 'https://images.unsplash.com/photo-1509440159596-0249088772ff?w=800',
                        activo,
                        destacado,
                        contenido: []
                    })
                });

                const data = await response.json();

                if (data.success) {
                    alert('‚úÖ Curso creado exitosamente');
                    bootstrap.Modal.getInstance(document.querySelector('.modal')).hide();
                    cargarCursos();
                } else {
                    alert('‚ùå Error: ' + (data.message || 'No se pudo crear el curso'));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al crear el curso');
            }
        }

        async function editarCurso(id) {
            try {
                // Buscar el curso en los datos cargados
                const response = await fetch(`/api/cursos`);
                const data = await response.json();
                const curso = data.data.find(c => c.id == id);
                
                if (!curso) {
                    alert('Curso no encontrado');
                    return;
                }

                // Llenar el formulario con los datos del curso
                document.getElementById('edit-curso-id').value = curso.id;
                document.getElementById('edit-curso-titulo').value = curso.titulo || '';
                document.getElementById('edit-curso-nivel').value = curso.nivel || '';
                document.getElementById('edit-curso-descripcion').value = curso.descripcion || '';
                document.getElementById('edit-curso-precio').value = curso.precio || '';
                document.getElementById('edit-curso-duracion').value = curso.duracion_horas || '';
                document.getElementById('edit-curso-activo').checked = curso.activo !== false;
                document.getElementById('edit-curso-destacado').checked = curso.destacado === true;
                document.getElementById('edit-curso-imagen').value = curso.imagen_url || '';

                // Mostrar el modal
                const modal = new bootstrap.Modal(document.getElementById('modal-editar-curso'));
                modal.show();
                
            } catch (error) {
                console.error('Error cargando curso:', error);
                alert('Error al cargar los datos del curso');
            }
        }

        async function toggleActivoCurso(id, nuevoEstado) {
            if (!confirm(`¬ø${nuevoEstado ? 'Activar' : 'Desactivar'} este curso?`)) return;
            
            try {
                const response = await fetch(`${window.API_BASE}/api/admin/cursos/${id}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ activo: nuevoEstado })
                });

                const data = await response.json();

                if (data.success) {
                    alert(`‚úÖ Curso ${nuevoEstado ? 'activado' : 'desactivado'}`);
                    cargarCursos();
                } else {
                    alert('‚ùå Error: ' + data.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al actualizar el curso');
            }
        }

        async function eliminarCurso(id) {
            if (!confirm('¬øEst√°s seguro de eliminar este curso? Esta acci√≥n no se puede deshacer.')) return;
            
            try {
                const response = await fetch(`${window.API_BASE}/api/admin/cursos/${id}`, {
                    method: 'DELETE'
                });

                const data = await response.json();

                if (data.success) {
                    alert('‚úÖ Curso eliminado');
                    cargarCursos();
                } else {
                    alert('‚ùå Error: ' + data.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al eliminar el curso');
            }
        }

        function gestionarLecciones(cursoId) {
            // Cargar datos del curso
            fetch(`${window.API_BASE}/api/cursos`)
                .then(res => res.json())
                .then(data => {
                    const curso = data.data.find(c => c.id === cursoId);
                    if (!curso) {
                        alert('Curso no encontrado');
                        return;
                    }
                    mostrarModalLecciones(curso);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al cargar el curso');
                });
        }

        function mostrarModalLecciones(curso) {
            const lecciones = curso.contenido || [];
            
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.innerHTML = `
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">
                                <i class="ri-play-list-line"></i> Lecciones: ${curso.titulo}
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <button class="btn btn-primary btn-sm" onclick="agregarNuevaLeccion('${curso.id}')">
                                    <i class="ri-add-line"></i> Agregar Lecci√≥n
                                </button>
                            </div>
                            
                            <div id="lecciones-lista" class="list-group">
                                ${lecciones.length === 0 ? `
                                    <div class="alert alert-info">
                                        <i class="ri-information-line"></i> 
                                        No hay lecciones todav√≠a. Comienza agregando tu primera lecci√≥n.
                                    </div>
                                ` : lecciones.map((leccion, index) => `
                                    <div class="list-group-item" data-index="${index}">
                                        <div class="d-flex justify-content-between align-items-start">
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">
                                                    <span class="badge bg-secondary me-2">${index + 1}</span>
                                                    ${leccion.titulo}
                                                </h6>
                                                <p class="mb-1 text-muted small">
                                                    <i class="ri-time-line"></i> ${leccion.duracion || 'N/A'}
                                                </p>
                                                ${leccion.video_url ? `
                                                    <p class="mb-0 small">
                                                        <i class="ri-video-line"></i> 
                                                        <a href="${leccion.video_url}" target="_blank" class="text-decoration-none">
                                                            Ver video
                                                        </a>
                                                    </p>
                                                ` : '<p class="mb-0 small text-warning"><i class="ri-alert-line"></i> Sin video</p>'}
                                            </div>
                                            <div class="btn-group btn-group-sm">
                                                <button class="btn btn-outline-secondary" onclick="editarLeccion('${curso.id}', ${index})" title="Editar">
                                                    <i class="ri-edit-line"></i>
                                                </button>
                                                <button class="btn btn-outline-danger" onclick="eliminarLeccion('${curso.id}', ${index})" title="Eliminar">
                                                    <i class="ri-delete-bin-line"></i>
                                                </button>
                                                ${index > 0 ? `
                                                    <button class="btn btn-outline-primary" onclick="moverLeccion('${curso.id}', ${index}, 'up')" title="Subir">
                                                        <i class="ri-arrow-up-line"></i>
                                                    </button>
                                                ` : ''}
                                                ${index < lecciones.length - 1 ? `
                                                    <button class="btn btn-outline-primary" onclick="moverLeccion('${curso.id}', ${index}, 'down')" title="Bajar">
                                                        <i class="ri-arrow-down-line"></i>
                                                    </button>
                                                ` : ''}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();
            modal.addEventListener('hidden.bs.modal', () => modal.remove());
        }

        function agregarNuevaLeccion(cursoId) {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.id = 'modal-nueva-leccion';
            modal.innerHTML = `
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"><i class="ri-add-line"></i> Nueva Lecci√≥n</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <form id="form-nueva-leccion">
                                <div class="mb-3">
                                    <label class="form-label">T√≠tulo de la Lecci√≥n *</label>
                                    <input type="text" class="form-control" id="leccion-titulo" required
                                           placeholder="Ej: Introducci√≥n a la Panader√≠a">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Duraci√≥n *</label>
                                    <input type="text" class="form-control" id="leccion-duracion" required
                                           placeholder="Ej: 30 min">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">URL del Video</label>
                                    <input type="url" class="form-control" id="leccion-video"
                                           placeholder="https://youtube.com/watch?v=... o https://vimeo.com/...">
                                    <small class="form-text text-muted">
                                        Puedes usar YouTube, Vimeo u otro servicio de videos
                                    </small>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Descripci√≥n (opcional)</label>
                                    <textarea class="form-control" id="leccion-descripcion" rows="2"
                                              placeholder="Breve descripci√≥n de lo que se aprender√°"></textarea>
                                </div>
                                
                                <div class="alert alert-info small">
                                    <strong>üí° Tip:</strong> Para YouTube, usa videos "No listados" para que solo sean accesibles con el link.
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-primary" onclick="guardarNuevaLeccion('${cursoId}')">
                                <i class="ri-save-line"></i> Agregar Lecci√≥n
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();
            modal.addEventListener('hidden.bs.modal', () => modal.remove());
        }

        async function guardarNuevaLeccion(cursoId) {
            const titulo = document.getElementById('leccion-titulo').value;
            const duracion = document.getElementById('leccion-duracion').value;
            const video = document.getElementById('leccion-video').value;
            const descripcion = document.getElementById('leccion-descripcion').value;

            if (!titulo || !duracion) {
                alert('Por favor completa el t√≠tulo y la duraci√≥n');
                return;
            }

            try {
                // Obtener curso actual
                const response = await fetch(`${window.API_BASE}/api/cursos`);
                const data = await response.json();
                const curso = data.data.find(c => c.id === cursoId);

                if (!curso) {
                    alert('Curso no encontrado');
                    return;
                }

                // Agregar nueva lecci√≥n
                const lecciones = curso.contenido || [];
                lecciones.push({
                    titulo,
                    duracion,
                    video_url: video || '',
                    descripcion: descripcion || '',
                    material: []
                });

                // Actualizar curso
                const updateResponse = await fetch(`${window.API_BASE}/api/admin/cursos/${cursoId}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contenido: lecciones })
                });

                const updateData = await updateResponse.json();

                if (updateData.success) {
                    alert('‚úÖ Lecci√≥n agregada exitosamente');
                    bootstrap.Modal.getInstance(document.getElementById('modal-nueva-leccion')).hide();
                    // Recargar modal de lecciones
                    const modalLecciones = document.querySelector('.modal.show');
                    if (modalLecciones) {
                        bootstrap.Modal.getInstance(modalLecciones).hide();
                    }
                    setTimeout(() => gestionarLecciones(cursoId), 300);
                } else {
                    alert('‚ùå Error: ' + updateData.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al agregar la lecci√≥n');
            }
        }

        async function editarLeccion(cursoId, index) {
            try {
                const response = await fetch(`${window.API_BASE}/api/cursos`);
                const data = await response.json();
                const curso = data.data.find(c => c.id === cursoId);
                const leccion = curso.contenido[index];

                const modal = document.createElement('div');
                modal.className = 'modal fade';
                modal.id = 'modal-editar-leccion';
                modal.innerHTML = `
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title"><i class="ri-edit-line"></i> Editar Lecci√≥n</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="form-editar-leccion">
                                    <div class="mb-3">
                                        <label class="form-label">T√≠tulo de la Lecci√≥n *</label>
                                        <input type="text" class="form-control" id="edit-leccion-titulo" 
                                               value="${leccion.titulo}" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Duraci√≥n *</label>
                                        <input type="text" class="form-control" id="edit-leccion-duracion" 
                                               value="${leccion.duracion}" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">URL del Video</label>
                                        <input type="url" class="form-control" id="edit-leccion-video"
                                               value="${leccion.video_url || ''}">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Descripci√≥n</label>
                                        <textarea class="form-control" id="edit-leccion-descripcion" rows="2">${leccion.descripcion || ''}</textarea>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                <button type="button" class="btn btn-primary" onclick="actualizarLeccion('${cursoId}', ${index})">
                                    <i class="ri-save-line"></i> Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
                const bsModal = new bootstrap.Modal(modal);
                bsModal.show();
                modal.addEventListener('hidden.bs.modal', () => modal.remove());
            } catch (error) {
                console.error('Error:', error);
                alert('Error al cargar la lecci√≥n');
            }
        }

        async function actualizarLeccion(cursoId, index) {
            const titulo = document.getElementById('edit-leccion-titulo').value;
            const duracion = document.getElementById('edit-leccion-duracion').value;
            const video = document.getElementById('edit-leccion-video').value;
            const descripcion = document.getElementById('edit-leccion-descripcion').value;

            if (!titulo || !duracion) {
                alert('Por favor completa el t√≠tulo y la duraci√≥n');
                return;
            }

            try {
                const response = await fetch(`${window.API_BASE}/api/cursos`);
                const data = await response.json();
                const curso = data.data.find(c => c.id === cursoId);

                const lecciones = curso.contenido || [];
                lecciones[index] = {
                    titulo,
                    duracion,
                    video_url: video || '',
                    descripcion: descripcion || '',
                    material: lecciones[index].material || []
                };

                const updateResponse = await fetch(`${window.API_BASE}/api/admin/cursos/${cursoId}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contenido: lecciones })
                });

                const updateData = await updateResponse.json();

                if (updateData.success) {
                    alert('‚úÖ Lecci√≥n actualizada');
                    bootstrap.Modal.getInstance(document.getElementById('modal-editar-leccion')).hide();
                    const modalLecciones = document.querySelector('.modal.show');
                    if (modalLecciones) {
                        bootstrap.Modal.getInstance(modalLecciones).hide();
                    }
                    setTimeout(() => gestionarLecciones(cursoId), 300);
                } else {
                    alert('‚ùå Error: ' + updateData.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al actualizar la lecci√≥n');
            }
        }

        async function eliminarLeccion(cursoId, index) {
            if (!confirm('¬øEst√°s seguro de eliminar esta lecci√≥n?')) return;

            try {
                const response = await fetch(`${window.API_BASE}/api/cursos`);
                const data = await response.json();
                const curso = data.data.find(c => c.id === cursoId);

                const lecciones = curso.contenido || [];
                lecciones.splice(index, 1);

                const updateResponse = await fetch(`${window.API_BASE}/api/admin/cursos/${cursoId}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contenido: lecciones })
                });

                const updateData = await updateResponse.json();

                if (updateData.success) {
                    alert('‚úÖ Lecci√≥n eliminada');
                    const modalLecciones = document.querySelector('.modal.show');
                    if (modalLecciones) {
                        bootstrap.Modal.getInstance(modalLecciones).hide();
                    }
                    setTimeout(() => gestionarLecciones(cursoId), 300);
                } else {
                    alert('‚ùå Error: ' + updateData.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al eliminar la lecci√≥n');
            }
        }

        async function moverLeccion(cursoId, index, direccion) {
            try {
                const response = await fetch(`${window.API_BASE}/api/cursos`);
                const data = await response.json();
                const curso = data.data.find(c => c.id === cursoId);

                const lecciones = [...curso.contenido];
                const nuevoIndex = direccion === 'up' ? index - 1 : index + 1;

                if (nuevoIndex < 0 || nuevoIndex >= lecciones.length) return;

                // Intercambiar
                [lecciones[index], lecciones[nuevoIndex]] = [lecciones[nuevoIndex], lecciones[index]];

                const updateResponse = await fetch(`${window.API_BASE}/api/admin/cursos/${cursoId}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contenido: lecciones })
                });

                const updateData = await updateResponse.json();

                if (updateData.success) {
                    const modalLecciones = document.querySelector('.modal.show');
                    if (modalLecciones) {
                        bootstrap.Modal.getInstance(modalLecciones).hide();
                    }
                    setTimeout(() => gestionarLecciones(cursoId), 300);
                } else {
                    alert('‚ùå Error: ' + updateData.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al mover la lecci√≥n');
            }
        }

        async function cargarTodasOrdenes() {
            const tbody = document.getElementById('ordenes-todas');
            tbody.innerHTML = '<tr><td colspan="7" class="text-center py-4">No hay √≥rdenes</td></tr>';
            
            // TODO: Implementar carga real desde API
        }

        function verTodasOrdenes() {
            document.querySelector('[data-section="ordenes"]').click();
        }

        function filtrarOrdenes() {
            const estado = document.getElementById('filtro-estado').value;
            cargarTodasOrdenes(estado);
        }

        function modalNuevoProducto() {
            const modal = new bootstrap.Modal(document.getElementById('modal-nuevo-producto'));
            
            // Limpiar formulario
            document.getElementById('form-nuevo-producto').reset();
            document.getElementById('producto-activo').checked = true;
            document.getElementById('producto-destacado').checked = false;
            
            modal.show();
        }

        async function guardarNuevoProducto() {
            // Validar formulario
            const form = document.getElementById('form-nuevo-producto');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // Recopilar datos
            const nuevoProducto = {
                nombre: document.getElementById('producto-nombre').value.trim(),
                precio: parseFloat(document.getElementById('producto-precio').value),
                descripcion: document.getElementById('producto-descripcion').value.trim(),
                categoria: document.getElementById('producto-categoria').value,
                stock: parseInt(document.getElementById('producto-stock').value),
                sku: document.getElementById('producto-sku').value.trim() || null,
                imagen_url: document.getElementById('producto-imagen').value.trim() || null,
                activo: document.getElementById('producto-activo').checked,
                destacado: document.getElementById('producto-destacado').checked
            };

            try {
                const headers = {
                    'Content-Type': 'application/json'
                };
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`${API_BASE}/api/admin/productos`, {
                    method: 'POST',
                    headers,
                    body: JSON.stringify(nuevoProducto)
                });

                if (response.ok) {
                    const modal = bootstrap.Modal.getInstance(document.getElementById('modal-nuevo-producto'));
                    modal.hide();
                    
                    alert('‚úÖ Producto creado exitosamente');
                    
                    // Recargar lista de productos
                    cargarProductos();
                } else {
                    const error = await response.json();
                    alert('‚ùå Error al crear producto: ' + (error.mensaje || 'Error desconocido'));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al conectar con el servidor');
            }
        }

        function modalNuevoCurso() {
            const modal = new bootstrap.Modal(document.getElementById('modal-nuevo-curso'));
            
            // Limpiar formulario
            document.getElementById('form-nuevo-curso').reset();
            document.getElementById('curso-activo').checked = true;
            document.getElementById('curso-destacado').checked = false;
            document.getElementById('curso-duracion').value = '1';
            
            modal.show();
        }

        async function guardarNuevoCurso() {
            // Validar formulario
            const form = document.getElementById('form-nuevo-curso');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // Recopilar datos
            const nuevoCurso = {
                titulo: document.getElementById('curso-titulo').value.trim(),
                precio: parseFloat(document.getElementById('curso-precio').value),
                descripcion: document.getElementById('curso-descripcion').value.trim(),
                duracion_horas: parseFloat(document.getElementById('curso-duracion').value),
                nivel: document.getElementById('curso-nivel').value,
                categoria: document.getElementById('curso-categoria').value || null,
                imagen_url: document.getElementById('curso-imagen').value.trim() || null,
                video_intro: document.getElementById('curso-video-intro').value.trim() || null,
                activo: document.getElementById('curso-activo').checked,
                destacado: document.getElementById('curso-destacado').checked,
                contenido: [] // Array vac√≠o de lecciones, se agregan despu√©s
            };

            try {
                const headers = {
                    'Content-Type': 'application/json'
                };
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`${API_BASE}/api/admin/cursos`, {
                    method: 'POST',
                    headers,
                    body: JSON.stringify(nuevoCurso)
                });

                if (response.ok) {
                    const modal = bootstrap.Modal.getInstance(document.getElementById('modal-nuevo-curso'));
                    modal.hide();
                    
                    alert('‚úÖ Curso creado exitosamente\n\nAhora puedes agregar lecciones desde la tabla de cursos.');
                    
                    // Recargar lista de cursos
                    cargarCursos();
                } else {
                    const error = await response.json();
                    alert('‚ùå Error al crear curso: ' + (error.mensaje || 'Error desconocido'));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Error al conectar con el servidor');
            }
        }

        function cerrarSesion() {
            localStorage.removeItem('admin_password');
            location.reload();
        }

        // ===================================
        // FUNCIONES DE UPLOAD DE IM√ÅGENES
        // ===================================
        
        function inicializarUploadImagenes() {
            console.log('üìÅ Inicializando sistema de upload de im√°genes...');
            
            // Configurar upload para productos
            configurarUpload('producto');
            
            // Configurar upload para cursos
            configurarUpload('curso');
        }

        function configurarUpload(tipo) {
            const uploadArea = document.getElementById(`${tipo}-upload-area`);
            const fileInput = document.getElementById(`${tipo}-file-input`);
            const preview = document.getElementById(`${tipo}-image-preview`);
            const previewImg = document.getElementById(`${tipo}-preview-img`);
            const removeBtn = document.getElementById(`${tipo}-remove-image`);
            const hiddenInput = document.getElementById(`${tipo}-imagen`);
            const urlInput = document.getElementById(`${tipo}-imagen-url`);

            if (!uploadArea || !fileInput) {
                console.warn(`‚ö†Ô∏è Elementos de upload no encontrados para ${tipo}`);
                return;
            }

            // Click en √°rea de upload
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });

            // Drag and drop
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = '#007bff';
                uploadArea.style.backgroundColor = '#f8f9fa';
            });

            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = '#ddd';
                uploadArea.style.backgroundColor = 'transparent';
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = '#ddd';
                uploadArea.style.backgroundColor = 'transparent';
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileSelect(files[0], tipo);
                }
            });

            // Selecci√≥n de archivo
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleFileSelect(e.target.files[0], tipo);
                }
            });

            // Eliminar imagen
            if (removeBtn) {
                removeBtn.addEventListener('click', () => {
                    resetImageUpload(tipo);
                });
            }

            // Sincronizar URL externa con campo oculto
            if (urlInput) {
                urlInput.addEventListener('input', (e) => {
                    if (hiddenInput) {
                        hiddenInput.value = e.target.value;
                    }
                });
            }

            // Listener para cambio de tabs
            const uploadTab = document.getElementById(`${tipo}-upload-tab`);
            const urlTab = document.getElementById(`${tipo}-url-tab`);

            if (uploadTab) {
                uploadTab.addEventListener('shown.bs.tab', () => {
                    // Al cambiar a upload, limpiar URL
                    if (urlInput) urlInput.value = '';
                });
            }

            if (urlTab) {
                urlTab.addEventListener('shown.bs.tab', () => {
                    // Al cambiar a URL, limpiar upload
                    resetImageUpload(tipo);
                });
            }
        }

        async function handleFileSelect(file, tipo) {
            console.log(`üìÅ Archivo seleccionado para ${tipo}:`, file.name);

            // Verificar si ya hay un upload en progreso para este tipo
            if (window[`uploading_${tipo}`]) {
                console.log(`‚ö†Ô∏è Upload ya en progreso para ${tipo}, ignorando...`);
                return;
            }

            // Validar tipo de archivo
            if (!file.type.startsWith('image/')) {
                mostrarAlerta('Solo se permiten archivos de imagen', 'error');
                return;
            }

            // Validar tama√±o (5MB m√°ximo)
            if (file.size > 5 * 1024 * 1024) {
                mostrarAlerta('El archivo es muy grande. M√°ximo 5MB', 'error');
                return;
            }

            // Marcar como subiendo
            window[`uploading_${tipo}`] = true;

            // Mostrar preview inmediatamente
            const reader = new FileReader();
            reader.onload = (e) => {
                mostrarPreview(e.target.result, tipo);
            };
            reader.readAsDataURL(file);

            // Subir archivo al servidor
            try {
                const formData = new FormData();
                formData.append('imagen', file);

                mostrarCargando(`Subiendo ${file.name}...`);

                const response = await fetch('/api/upload/imagen', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('admin_password')}`
                    },
                    body: formData
                });

                const result = await response.json();
                ocultarCargando();

                if (result.error) {
                    throw new Error(result.mensaje);
                }

                console.log('‚úÖ Imagen subida correctamente:', result.data);
                
                // Actualizar campo oculto con la URL
                const hiddenInput = document.getElementById(`${tipo}-imagen`);
                if (hiddenInput) {
                    hiddenInput.value = result.data.url;
                }

                mostrarAlerta('Imagen subida correctamente', 'success');

            } catch (error) {
                console.error('‚ùå Error al subir imagen:', error);
                mostrarAlerta(`Error al subir imagen: ${error.message}`, 'error');
                resetImageUpload(tipo);
                ocultarCargando();
            } finally {
                // Liberar la bandera de upload
                window[`uploading_${tipo}`] = false;
            }
        }

        function mostrarPreview(src, tipo) {
            const preview = document.getElementById(`${tipo}-image-preview`);
            const previewImg = document.getElementById(`${tipo}-preview-img`);

            if (preview && previewImg) {
                previewImg.src = src;
                preview.style.display = 'block';
            }
        }

        function resetImageUpload(tipo) {
            const preview = document.getElementById(`${tipo}-image-preview`);
            const previewImg = document.getElementById(`${tipo}-preview-img`);
            const fileInput = document.getElementById(`${tipo}-file-input`);
            const hiddenInput = document.getElementById(`${tipo}-imagen`);

            if (preview) preview.style.display = 'none';
            if (previewImg) previewImg.src = '';
            if (fileInput) fileInput.value = '';
            if (hiddenInput) hiddenInput.value = '';
        }

        function mostrarCargando(mensaje = 'Cargando...') {
            // Crear overlay de carga si no existe
            let overlay = document.getElementById('loading-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.id = 'loading-overlay';
                overlay.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                                background: rgba(0,0,0,0.5); z-index: 9999; display: flex; 
                                align-items: center; justify-content: center;">
                        <div style="background: white; padding: 20px; border-radius: 8px; text-align: center;">
                            <div class="spinner-border text-primary mb-2"></div>
                            <div id="loading-message">${mensaje}</div>
                        </div>
                    </div>
                `;
                document.body.appendChild(overlay);
            } else {
                document.getElementById('loading-message').textContent = mensaje;
                overlay.style.display = 'block';
            }
        }

        function ocultarCargando() {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }

        // Configurar formularios de edici√≥n
        function configurarFormulariosEdicion() {
            // Formulario de edici√≥n de productos
            const formEditarProducto = document.getElementById('form-editar-producto');
            if (formEditarProducto) {
                formEditarProducto.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const id = document.getElementById('edit-producto-id').value;
                    const productoDatos = {
                        nombre: document.getElementById('edit-producto-nombre').value,
                        categoria: document.getElementById('edit-producto-categoria').value,
                        descripcion: document.getElementById('edit-producto-descripcion').value,
                        precio: parseFloat(document.getElementById('edit-producto-precio').value),
                        stock: parseInt(document.getElementById('edit-producto-stock').value),
                        activo: document.getElementById('edit-producto-activo').checked,
                        destacado: document.getElementById('edit-producto-destacado').checked,
                        imagen_url: document.getElementById('edit-producto-imagen').value
                    };

                    try {
                        const response = await fetch(`/api/admin/productos/${id}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': 'Bearer admin123'
                            },
                            body: JSON.stringify(productoDatos)
                        });

                        const result = await response.json();
                        
                        if (result.success) {
                            // Cerrar modal
                            bootstrap.Modal.getInstance(document.getElementById('modal-editar-producto')).hide();
                            
                            // Recargar productos
                            cargarProductos();
                            
                            // Mostrar mensaje de √©xito
                            alert('Producto actualizado exitosamente');
                        } else {
                            alert('Error: ' + result.message);
                        }
                    } catch (error) {
                        console.error('Error actualizando producto:', error);
                        alert('Error al actualizar el producto');
                    }
                });
            }

            // Formulario de edici√≥n de cursos
            const formEditarCurso = document.getElementById('form-editar-curso');
            if (formEditarCurso) {
                formEditarCurso.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const id = document.getElementById('edit-curso-id').value;
                    const cursoDatos = {
                        titulo: document.getElementById('edit-curso-titulo').value,
                        nivel: document.getElementById('edit-curso-nivel').value,
                        descripcion: document.getElementById('edit-curso-descripcion').value,
                        precio: parseFloat(document.getElementById('edit-curso-precio').value),
                        duracion_horas: parseInt(document.getElementById('edit-curso-duracion').value),
                        activo: document.getElementById('edit-curso-activo').checked,
                        destacado: document.getElementById('edit-curso-destacado').checked,
                        imagen_url: document.getElementById('edit-curso-imagen').value
                    };

                    try {
                        const response = await fetch(`/api/admin/cursos/${id}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': 'Bearer admin123'
                            },
                            body: JSON.stringify(cursoDatos)
                        });

                        const result = await response.json();
                        
                        if (result.success) {
                            // Cerrar modal
                            bootstrap.Modal.getInstance(document.getElementById('modal-editar-curso')).hide();
                            
                            // Recargar cursos
                            cargarCursos();
                            
                            // Mostrar mensaje de √©xito
                            alert('Curso actualizado exitosamente');
                        } else {
                            alert('Error: ' + result.message);
                        }
                    } catch (error) {
                        console.error('Error actualizando curso:', error);
                        alert('Error al actualizar el curso');
                    }
                });
            }
        }

        // Funci√≥n de inicializaci√≥n
        function inicializarAdmin() {
            console.log('üöÄ Inicializando admin panel...');
            
            // Configurar navegaci√≥n del sidebar
            const menuLinks = document.querySelectorAll('.sidebar-menu a[data-section]');
            console.log('üìã Enlaces de men√∫ encontrados:', menuLinks.length);
            
            menuLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.dataset.section;
                    console.log('üîÑ Navegando a secci√≥n:', section);
                    
                    // Actualizar men√∫ activo
                    document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
                    link.classList.add('active');
                    
                    // Mostrar secci√≥n
                    document.querySelectorAll('[id$="-section"]').forEach(s => s.style.display = 'none');
                    document.getElementById(`${section}-section`).style.display = 'block';
                    
                    // Actualizar t√≠tulo
                    document.querySelector('.admin-header h1').textContent = 
                        link.textContent.replace(/^\s+|\s+$/g, '').replace(/\s+/g, ' ');
                    
                    // Cargar datos seg√∫n la secci√≥n
                    console.log('üìä Cargando datos para:', section);
                    if (section === 'dashboard') cargarDashboard();
                    else if (section === 'productos') {
                        console.log('üì¶ Llamando a cargarProductos()');
                        cargarProductos();
                    }
                    else if (section === 'cursos') {
                        console.log('üìö Llamando a cargarCursos()');
                        cargarCursos();
                    }
                    else if (section === 'ordenes') cargarTodasOrdenes();
                    else if (section === 'configuracion') cargarConfiguracion();
                });
            });
            
            // Inicializar funcionalidad de upload de im√°genes
            inicializarUploadImagenes();
            
            // Configurar formularios de edici√≥n
            configurarFormulariosEdicion();
            
            // Cargar dashboard inicial
            console.log('üìä Cargando dashboard inicial...');
            cargarDashboard();
        }

        // Ejecutar cuando el DOM est√© listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', inicializarAdmin);
        } else {
            inicializarAdmin();
        }
    </script>

    <!-- Modal Editar Producto -->
    <div class="modal fade" id="modal-editar-producto" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="ri-edit-line"></i> Editar Producto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="form-editar-producto">
                    <div class="modal-body">
                        <input type="hidden" id="edit-producto-id">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Nombre del Producto</label>
                                    <input type="text" class="form-control" id="edit-producto-nombre" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Categor√≠a</label>
                                    <select class="form-select" id="edit-producto-categoria" required>
                                        <option value="">Seleccionar categor√≠a</option>
                                        <option value="panes">Panes</option>
                                        <option value="tortas">Tortas</option>
                                        <option value="masas">Masas</option>
                                        <option value="comidas">Comidas</option>
                                        <option value="otros">Otros</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descripci√≥n</label>
                            <textarea class="form-control" id="edit-producto-descripcion" rows="3"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Precio ($)</label>
                                    <input type="number" class="form-control" id="edit-producto-precio" step="0.01" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Stock</label>
                                    <input type="number" class="form-control" id="edit-producto-stock" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Estado</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="edit-producto-activo">
                                        <label class="form-check-label">Activo</label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="edit-producto-destacado">
                                        <label class="form-check-label">Destacado</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Imagen URL</label>
                            <input type="url" class="form-control" id="edit-producto-imagen">
                            <div class="form-text">URL de la imagen del producto</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="ri-save-line"></i> Guardar Cambios
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Editar Curso -->
    <div class="modal fade" id="modal-editar-curso" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="ri-edit-line"></i> Editar Curso</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="form-editar-curso">
                    <div class="modal-body">
                        <input type="hidden" id="edit-curso-id">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label class="form-label">T√≠tulo del Curso</label>
                                    <input type="text" class="form-control" id="edit-curso-titulo" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Nivel</label>
                                    <select class="form-select" id="edit-curso-nivel" required>
                                        <option value="">Seleccionar nivel</option>
                                        <option value="Principiante">Principiante</option>
                                        <option value="Intermedio">Intermedio</option>
                                        <option value="Avanzado">Avanzado</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descripci√≥n</label>
                            <textarea class="form-control" id="edit-curso-descripcion" rows="3"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Precio ($)</label>
                                    <input type="number" class="form-control" id="edit-curso-precio" step="0.01" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Duraci√≥n (horas)</label>
                                    <input type="number" class="form-control" id="edit-curso-duracion" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Estado</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="edit-curso-activo">
                                        <label class="form-check-label">Activo</label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="edit-curso-destacado">
                                        <label class="form-check-label">Destacado</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Imagen URL</label>
                                    <input type="url" class="form-control" id="edit-curso-imagen">
                                    <div class="form-text">URL de la imagen del curso</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="ri-save-line"></i> Guardar Cambios
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</body>
</html>
